## API Report File for "@backstage/plugin-user-settings-backend"

> Do not edit this file. It is a report generated by [API Extractor](https://api-extractor.com/).

```ts
import express from 'express';
import { IdentityClient } from '@backstage/plugin-auth-node';
import { Knex } from 'knex';
import { PluginDatabaseManager } from '@backstage/backend-common';

// @public
export function createRouter<T>(
  options: RouterOptions<T>,
): Promise<express.Router>;

// @public
export class DatabaseUserSettingsStore
  implements UserSettingsStore<Knex.Transaction>
{
  // (undocumented)
  static create(options: {
    database: PluginDatabaseManager;
  }): Promise<DatabaseUserSettingsStore>;
  // (undocumented)
  delete(
    tx: Knex.Transaction<any, any[]>,
    opts: {
      userEntityRef: string;
      bucket: string;
      key: string;
    },
  ): Promise<void>;
  // (undocumented)
  deleteAll(
    tx: Knex.Transaction<any, any[]>,
    opts: {
      userEntityRef: string;
    },
  ): Promise<void>;
  // (undocumented)
  deleteBucket(
    tx: Knex.Transaction<any, any[]>,
    opts: {
      userEntityRef: string;
      bucket: string;
    },
  ): Promise<void>;
  // (undocumented)
  get(
    tx: Knex.Transaction<any, any[]>,
    opts: {
      userEntityRef: string;
      bucket: string;
      key: string;
    },
  ): Promise<UserSetting>;
  // (undocumented)
  getAll(
    tx: Knex.Transaction,
    opts: {
      userEntityRef: string;
    },
  ): Promise<Pick<RawDbUserSettingsRow, 'key' | 'value' | 'bucket'>[]>;
  // (undocumented)
  getBucket(
    tx: Knex.Transaction<any, any[]>,
    opts: {
      userEntityRef: string;
      bucket: string;
    },
  ): Promise<UserSetting[]>;
  // (undocumented)
  set(
    tx: Knex.Transaction<any, any[]>,
    opts: {
      userEntityRef: string;
      bucket: string;
      key: string;
      value: string;
    },
  ): Promise<void>;
  // (undocumented)
  transaction<T>(fn: (tx: Knex.Transaction) => Promise<T>): Promise<T>;
}

// @public (undocumented)
export type RawDbUserSettingsRow = {
  user_entity_ref: string;
  bucket: string;
  key: string;
  value: string;
};

// @public (undocumented)
export interface RouterOptions<T> {
  // (undocumented)
  identity: IdentityClient;
  // (undocumented)
  userSettingsStore: UserSettingsStore<T>;
}

// @public (undocumented)
export type UserSetting = {
  bucket: string;
  key: string;
  value: string;
};

// @public
export interface UserSettingsStore<Transaction> {
  // (undocumented)
  delete(
    tx: Transaction,
    opts: {
      userEntityRef: string;
      bucket: string;
      key: string;
    },
  ): Promise<void>;
  // (undocumented)
  deleteAll(
    tx: Transaction,
    opts: {
      userEntityRef: string;
    },
  ): Promise<void>;
  // (undocumented)
  deleteBucket(
    tx: Transaction,
    opts: {
      userEntityRef: string;
      bucket: string;
    },
  ): Promise<void>;
  // (undocumented)
  get(
    tx: Transaction,
    opts: {
      userEntityRef: string;
      bucket: string;
      key: string;
    },
  ): Promise<UserSetting>;
  // (undocumented)
  getAll(
    tx: Transaction,
    opts: {
      userEntityRef: string;
    },
  ): Promise<UserSetting[]>;
  // (undocumented)
  getBucket(
    tx: Transaction,
    opts: {
      userEntityRef: string;
      bucket: string;
    },
  ): Promise<UserSetting[]>;
  // (undocumented)
  set(
    tx: Transaction,
    opts: {
      userEntityRef: string;
      bucket: string;
      key: string;
      value: string;
    },
  ): Promise<void>;
  // (undocumented)
  transaction<T>(fn: (tx: Transaction) => Promise<T>): Promise<T>;
}

// (No @packageDocumentation comment for this package)
```
